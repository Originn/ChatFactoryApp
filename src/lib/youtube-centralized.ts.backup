// DEBUG: Centralized YouTube API service - use your own API keys for all users
'use client';

import { YouTubeVideo } from '@/types/youtube';

/**
 * Centralized YouTube Service - Uses platform's API keys
 * Much better UX - users just click "Connect YouTube"
 */
export class CentralizedYouTubeService {
  private static instance: CentralizedYouTubeService;
  private accessToken: string | null = null;

  static getInstance(): CentralizedYouTubeService {
    if (!CentralizedYouTubeService.instance) {
      CentralizedYouTubeService.instance = new CentralizedYouTubeService();
    }
    return CentralizedYouTubeService.instance;
  }

  /**
   * Simple YouTube OAuth flow using your platform's keys
   */
  async connectYouTube(): Promise<void> {
    return new Promise((resolve, reject) => {
      // Uses YOUR platform's Google OAuth setup
      const authUrl = `/api/youtube/auth`;
      
      const popup = window.open(
        authUrl,
        'youtube-auth',
        'width=500,height=600,scrollbars=yes,resizable=yes'
      );

      if (!popup) {
        reject(new Error('Please allow popups to connect YouTube'));
        return;
      }

      // Listen for success from popup
      const message